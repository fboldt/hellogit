== Ramos no projeto

As etiquetas são fixadas em uma fotografia, mas ramos
(braches) são vivos e acompanham novas fotografias que 
são criadas.
Há muitas formas de se usar os braches.
Neste capítulo mostraremos uma delas.
Também há vários motivos para se usar os branches.
Um deles é que você pode inserir uma alteração instável
no sistema e querer que essa alteração fique gravada.
Ou seja, você fez uma alteração que não está pronta,
mas quer que essa alteração seja monitorada pelo Git por
algum motivo.
Talvez você não tenha certeza que o próximo passo vai funcionar,
ou talvez você queira testar o próximo passo de mais do que uma
forma. Ou ainda, pode ser que outra pessoa termine essa 
atualização parcial que você fez.
O fato é que você não quer que esta seja a versão usada até 
que ela esteja terminada.

=== Criando ramos

Como ilustração, faremos uma versão brasileira para o nosso
programa. Como eu supostamente ainda não sei se isso será
fácil ou difícil de terminar, farei um branch como mostra a
figura <<fig:30>>.
Agora a fotografia mais recente tem dois ramos (na cor verde),
*master* e *pt-br*.

.Criando um novo branch
[[fig:30, {counter:refnum}]]
image::30-Criando um novo branch.png[]

Para fazer um alteração no ramo *pt-br*, deve-se mudar 
*HEAD* para esse ramo, como apresentado na figura
<<fig:31>>. Agora *HEAD* aponta para *pt-br*.

.Acessando um branch
[[fig:31, {counter:refnum}]]
image::31-Acessando um branch.png[]

Quando só existia o ramo *master*, cada comando
`commit` movia o ramo *master* para a
fotografia mais recente.
Agora que *HEAD* aponta para *pt-br*,
o comando `commit` vai mover o ramo *pt-br*
para as novas fotografias, deixando o ramo
*master* na fotografia atual.
Assim, fica claro para todos os envolvidos no projeto
que o ramo *master* contém uma versão estável
do sistema.

=== Uma alteração incompleta para o ramos atual

Como ilustração será feita a alteração proposta na
figura <<fig:32>>.

.Alterando o sistema no branch atual
[[fig:32, {counter:refnum}]]
image::32-Alterando o sistema no branch atual.png[]

A resposta do comando `git status` da figura
<<fig:33>> já é conhecida. 
A única diferença do que já foi visto é a primeira linha
que mostra que ramo atual é o *pt-br* 
(_On branch pt-br_).

.Status do novo branch com arquivo modificado fora da área de stage
[[fig:33, {counter:refnum}]]
image::33-Status do novo branch com arquivo modificado fora da área de stage.png[]

O status após adicionar a alteração na área de stage
mostrado na figura <<fig:34>> também não é muito 
diferente do que já foi visto.

.Status do novo branch com arquivo modificado na da área de stage
[[fig:34, {counter:refnum}]]
image::34-Status do novo branch com arquivo modificado na da área de stage.png[]

O resultado dos comandos `git commit` 
e `git show` apresentados na
figura <<fig:35>> também não apresentam muita novidade.

.Fotografia da versão brasileira do sistema
[[fig:35, {counter:refnum}]]
image::35-Fotografia da versão brasileira do sistema.png[]

Note que o ramo *master* não tem nada de especial.
Usar outro nome para um ramo não muda nada no processo
de fotografar as versões do sistema.


=== Terminado a alteração desejada

Para mostrar como colocar uma alteração no ramo estável do
sistema, vamos fazer a alteração proposta na 
figura <<fig:36>>.
Estamos considerando o ramo estável deste repositório
o ramo *master*, mas poderia ser qualquer outro nome.

.Parametrizando o sistema
[[fig:36, {counter:refnum}]]
image::36-Parametrizando o sistema.png[]

Depois de colocar a nova alteração na área de stage
e executar o comando `commit` podemos ver a nova 
fotografia listada na figura <<fig:38>>.

.Lista das fotografias após a versão brasileira parametrizada
[[fig:38, {counter:refnum}]]
image::38-Lista das fotografias após a versão brasileira parametrizada.png[]

A figura <<fig:37>> mostra como ficou a fotografia
mais recente do repositório.
Também mostra como executar o programa na versão
mais recente, caso ache interessante.

.Fotografia da versão brasileira atualizada
[[fig:37, {counter:refnum}]]
image::37-Fotografia da versão brasileira atualizada.png[]

=== Mesclando o ramo atual com o ramo principal

Agora que a alteração já foi finalizada, é hora de 
mesclar a atualização no ramo principal.
A figura <<fig:39>> apresenta um procedimento que pode
ser executado com essa finalidade.
Primeiro, temos que fazer *HEAD* apontar
para o ramo principal com o comando 
`git checkout master`.
Depois, usamos o comando `git merge pt-br`
para mesclar o ramo *pt-br* com o ramo atual.

.Mesclando a versão brasileira com a versão original
[[fig:39, {counter:refnum}]]
image::39-Mesclando a versão brasileira com a versão original.png[]

A figura <<fig:40>> mostra a lista de fotografias
depois da mesclagem de ramos.

.Listando as fotografias do repositório após mesclar versões do sistema
[[fig:40, {counter:refnum}]]
image::40-Listando as fotografias do repositório após mesclar versões do sistema.png[]

Na segunda linha da reposta do comando
`git merge pt-br` na figura <<fig:39>> 
está escrito _Fast-forward_.
Isso significa que nenhuma alteração foi feita no
ramo *master* enquanto o ramo *pt-br*
estava sendo alterado.
Assim, não houve nenhum conflito para juntar as versões
porque a versão mais recente de *pt-br*
era como uma versão futura de *master*.
A seguir, veremos um situação que isso não é resolvido tão
facilmente.

